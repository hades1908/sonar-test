pipeline {
    agent any

    triggers {
        // Automatically trigger a build when changes are pushed to the specified branch
        scm('*/main')
    }
   stages {
    stage('SCM') {
      steps {
       checkout scm
  }
}
    stage('SonarQube Analysis') {
      steps {
       def mvn = tool 'Default Maven';
       withSonarQubeEnv('sonarqube-10.1') {
        sh "${mvn}/bin/mvn clean verify sonar:sonar -Dsonar.projectKey=spring-boot-app -Dsonar.projectName='spring-boot-app'"
      }
     }
    }
  }
}
